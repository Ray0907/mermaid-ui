"use strict";var e=require("mermaid");async function t(t,r,n){n&&e.initialize(n);const o=r??`mermaid-${Date.now()}-${Math.random().toString(36).substr(2)}`;try{const{svg:r}=await e.render(o,t);return r}catch(e){return`<pre style="color:red">${e instanceof Error?e.message:String(e)}</pre>`}}async function r(e,r){const n=document.querySelectorAll(e);for(const e of Array.from(n)){const n=e.textContent||"",o=await t(n,void 0,r?.mermaidConfig);e.innerHTML=o}}exports.initMermaidUI=function(n){var o,i;n.mermaidConfig&&e.initialize(n.mermaidConfig),r(n.selector,{mermaidConfig:n.mermaidConfig}),n.observer&&(o=n.selector,i=n.mermaidConfig,new MutationObserver((e=>{for(const r of e)"childList"===r.type&&r.addedNodes.forEach((async e=>{if(e instanceof HTMLElement){if(e.matches(o)){const r=e.textContent||"",n=await t(r,void 0,i);e.innerHTML=n}e.querySelectorAll(o).forEach((async e=>{const r=e.textContent||"",n=await t(r,void 0,i);e.innerHTML=n}))}}))})).observe(document.body,{childList:!0,subtree:!0}))},exports.renderAll=r,exports.renderOne=t;
